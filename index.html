<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sant√©+ - Plateforme de sant√© professionnelle</title>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    :root{
      --bg-1:#f5f9ff; --bg-2:#edf4ff; --bg-3:#eef2ff;
      --card:rgba(255,255,255,.92);
      --text:#0f172a; --muted:#475569; --muted2:#64748b;
      --primary:#2563eb; --accent:#4f46e5;
      --border:rgba(148,163,184,.35);
      --ring:rgba(37,99,235,.25);
      --shadow-sm:0 1px 2px rgba(15,23,42,.06);
      --shadow-md:0 10px 20px rgba(15,23,42,.08);
      --shadow-lg:0 18px 40px rgba(15,23,42,.12);
      --r-lg:16px; --r-md:12px;
      --ok:#16a34a; --warn:#f59e0b; --bad:#dc2626;
      --ok-bg:rgba(22,163,74,.12); --warn-bg:rgba(245,158,11,.14); --bad-bg:rgba(220,38,38,.12);
      --ok-bd:rgba(22,163,74,.35); --warn-bd:rgba(245,158,11,.35); --bad-bd:rgba(220,38,38,.35);
    }

    [data-theme="dark"]{
      --bg-1:#0b1220; --bg-2:#0b1326; --bg-3:#0a1020;
      --card:rgba(17,24,39,.82);
      --text:#e5e7eb; --muted:#cbd5e1; --muted2:#94a3b8;
      --border:rgba(148,163,184,.22);
      --ring:rgba(96,165,250,.22);
      --shadow-sm:0 1px 2px rgba(0,0,0,.35);
      --shadow-md:0 12px 24px rgba(0,0,0,.28);
      --shadow-lg:0 22px 48px rgba(0,0,0,.35);
    }

    *{margin:0;padding:0;box-sizing:border-box}
    html, body{height:100%}
    body{
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      background:
        radial-gradient(1000px 600px at 15% 10%, rgba(37,99,235,.12), transparent 55%),
        radial-gradient(900px 500px at 85% 20%, rgba(79,70,229,.12), transparent 60%),
        linear-gradient(135deg, var(--bg-1) 0%, var(--bg-2) 45%, var(--bg-3) 100%);
      min-height:100vh;
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* Header */
    .header{
      position: sticky; top:0; z-index:10;
      background: rgba(255,255,255,.72);
      backdrop-filter: blur(14px);
      border-bottom: 1px solid var(--border);
      box-shadow: var(--shadow-sm);
    }
    [data-theme="dark"] .header{background: rgba(2,6,23,.55);}

    .header-content{
      max-width:1600px; margin:0 auto;
      padding: 14px 24px;
      display:flex; align-items:center; justify-content:space-between;
      gap:16px;
    }
    .logo{display:flex; align-items:center; gap:12px; min-width:260px;}
    .logo-icon{
      width:42px;height:42px;border-radius:14px;
      display:flex;align-items:center;justify-content:center;
      background: linear-gradient(135deg, var(--primary), var(--accent));
      box-shadow: 0 10px 18px rgba(37,99,235,.20);
      border: 1px solid rgba(255,255,255,.7);
    }
    .logo-icon i{color:#fff;font-size:20px}
    .logo-text h1{font-size:16px;font-weight:900;letter-spacing:.2px;line-height:1.1}
    .logo-text p{font-size:12px;color:var(--muted2);margin-top:2px;font-weight:600}

    .header-actions{display:flex;align-items:center;gap:8px}
    .icon-btn{
      width:40px;height:40px;border-radius:10px;
      border:1px solid transparent;background:transparent;
      display:flex;align-items:center;justify-content:center;
      cursor:pointer; transition:.2s;
      color: var(--text);
    }
    .icon-btn:hover{background: rgba(37,99,235,.08); border-color: rgba(37,99,235,.15)}
    .icon-btn:focus-visible{outline:none; box-shadow:0 0 0 4px var(--ring); border-color: rgba(37,99,235,.35)}
    .icon-btn i{color: currentColor;font-size:16px}

    /* Container */
    .container{max-width:1600px;margin:0 auto;padding: 22px 24px 52px;}
    .page-header{margin: 18px 0 18px;}
    .page-header h2{font-size:34px;font-weight:950;letter-spacing:-.4px;margin-bottom:6px}
    .page-header p{font-size:15px;color:var(--muted);font-weight:600}

    /* Tabs */
    .tabsbar{
      display:flex; align-items:center; justify-content:space-between;
      gap:12px; margin: 12px 0 18px;
    }
    .tabs{
      display:flex; gap:8px;
      background: rgba(37,99,235,.08);
      border:1px solid rgba(37,99,235,.12);
      padding:6px; border-radius: 14px;
      flex-wrap: wrap;
    }
    [data-theme="dark"] .tabs{
      background: rgba(96,165,250,.10);
      border-color: rgba(148,163,184,.18);
    }
    .tab{
      display:flex; align-items:center; gap:10px;
      padding: 10px 14px;
      border-radius: 12px;
      border:1px solid transparent;
      background: transparent;
      color: var(--text);
      cursor:pointer;
      font-weight:900;
      font-size: 13px;
      letter-spacing:.1px;
      transition:.2s;
      white-space:nowrap;
    }
    .tab i{font-size:14px; opacity:.9}
    .tab:hover{background: rgba(255,255,255,.55); border-color: rgba(148,163,184,.22)}
    [data-theme="dark"] .tab:hover{background: rgba(148,163,184,.10);}
    .tab[aria-selected="true"]{
      background: linear-gradient(135deg, var(--primary), var(--accent));
      color:#fff;
      border-color: rgba(255,255,255,.45);
      box-shadow: 0 10px 18px rgba(37,99,235,.18);
    }
    .tab:focus-visible{outline:none; box-shadow:0 0 0 4px var(--ring)}
    .hint{
      color: var(--muted2);
      font-size: 12px;
      font-weight: 700;
      text-align: right;
      user-select: none;
    }

    /* Pages */
    .page{
      display:none;
      border-radius: var(--r-lg);
      background: var(--card);
      border: 1px solid var(--border);
      box-shadow: var(--shadow-md);
      padding: 18px;
    }
    .page.active{display:block; animation: fadeIn .22s ease}
    @keyframes fadeIn{from{opacity:0; transform: translateY(6px)}to{opacity:1; transform: translateY(0)}}

    /* Cards, grids */
    .grid-3{display:grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap:14px}
    .grid-2{display:grid; grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)); gap:14px}
    .grid-auto{display:grid; grid-template-columns: repeat(auto-fit, minmax(230px, 1fr)); gap:12px}
    .row{display:flex; align-items:center; gap:10px; flex-wrap: wrap;}
    .section-head{display:flex; align-items:flex-start; justify-content:space-between; gap:12px; flex-wrap: wrap;}

    .card, .mini-card{
      background: rgba(255,255,255,.80);
      border:1px solid rgba(148,163,184,.22);
      border-radius: 14px;
      padding: 14px;
      box-shadow: var(--shadow-sm);
    }
    [data-theme="dark"] .card,
    [data-theme="dark"] .mini-card{
      background: rgba(2,6,23,.35);
      border-color: rgba(148,163,184,.18);
    }

    .mini-title{font-size:12px; font-weight:900; letter-spacing:.12px; text-transform:uppercase; color: var(--muted)}
    .mini-value{font-size:28px; font-weight:950; margin-top:10px}
    .mini-sub{font-size:12px; color:var(--muted2); font-weight:700; margin-top:2px}

    .card-title{
      font-size: 12px;
      font-weight: 950;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: .12px;
      display:flex; align-items:center; gap:8px;
      margin-bottom: 10px;
    }
    .big{font-size:28px; font-weight:950; margin-top:10px}
    .sub{font-size:12px; color:var(--muted2); font-weight:700; margin-top:2px}

    .chart{height: 300px; position: relative;}

    /* Buttons */
    .btn{
      padding: 10px 14px;
      border: 1px solid rgba(148,163,184,.25);
      background: rgba(255,255,255,.85);
      color: var(--text);
      border-radius: 12px;
      cursor: pointer;
      font-size: 13px;
      font-weight: 900;
      transition: .2s;
      display:inline-flex; align-items:center; gap:8px;
    }
    [data-theme="dark"] .btn{
      background: rgba(2,6,23,.45);
      border-color: rgba(148,163,184,.20);
    }
    .btn:hover{transform: translateY(-1px); box-shadow: var(--shadow-sm)}
    .btn.primary{
      background: linear-gradient(135deg, var(--primary), var(--accent));
      border-color: rgba(255,255,255,.35);
      color: #fff;
    }
    .btn.ghost{
      background: transparent;
    }
    .btn:focus-visible{outline:none; box-shadow:0 0 0 4px var(--ring)}

    /* Table */
    table{width:100%; border-collapse: collapse; overflow:hidden; border-radius: 14px; border:1px solid rgba(148,163,184,.20)}
    thead th{
      text-align:left;
      font-size:12px;
      letter-spacing:.10px;
      text-transform:uppercase;
      color: var(--muted2);
      padding: 12px 12px;
      background: rgba(37,99,235,.06);
      border-bottom:1px solid rgba(148,163,184,.18);
    }
    [data-theme="dark"] thead th{background: rgba(96,165,250,.10);}
    tbody td{
      padding: 12px 12px;
      border-bottom:1px solid rgba(148,163,184,.14);
      font-size: 13px;
      font-weight: 700;
      color: var(--text);
    }
    tbody tr:hover{background: rgba(37,99,235,.05);}
    [data-theme="dark"] tbody tr:hover{background: rgba(148,163,184,.08);}

    /* Status badge */
    .badge{
      display:inline-flex; align-items:center; gap:8px;
      padding: 7px 10px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 950;
      border: 1px solid transparent;
      white-space: nowrap;
    }
    .b-ok{color: var(--ok); background: var(--ok-bg); border-color: var(--ok-bd);}
    .b-watch{color: var(--warn); background: var(--warn-bg); border-color: var(--warn-bd);}
    .b-alert{color: var(--bad); background: var(--bad-bg); border-color: var(--bad-bd);}

    .linklike{
      display:inline-flex; align-items:center; gap:8px;
      color: var(--text);
      cursor:pointer;
      text-decoration: none;
      padding: 6px 10px;
      border-radius: 10px;
      border:1px solid transparent;
      user-select: none;
    }
    .linklike:hover{background: rgba(37,99,235,.06); border-color: rgba(37,99,235,.12)}

    /* Settings controls */
    .field{
      display:flex; flex-direction:column; gap:8px;
      padding: 12px;
      border-radius: 14px;
      border:1px solid rgba(148,163,184,.20);
      background: rgba(255,255,255,.60);
    }
    [data-theme="dark"] .field{
      background: rgba(2,6,23,.25);
      border-color: rgba(148,163,184,.18);
    }
    .label{font-size:12px; font-weight:950; color: var(--muted); text-transform:uppercase; letter-spacing:.10px}
    select, input[type="text"]{
      width: 100%;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid rgba(148,163,184,.25);
      background: rgba(255,255,255,.85);
      color: var(--text);
      font-weight: 800;
      outline:none;
    }
    [data-theme="dark"] select, [data-theme="dark"] input[type="text"]{
      background: rgba(2,6,23,.45);
      border-color: rgba(148,163,184,.20);
    }
    select:focus, input[type="text"]:focus{box-shadow:0 0 0 4px var(--ring); border-color: rgba(37,99,235,.35)}

    /* Toggle */
    .toggle{
      width: 54px; height: 32px;
      border-radius: 999px;
      border:1px solid rgba(148,163,184,.25);
      background: rgba(255,255,255,.85);
      position: relative;
      cursor: pointer;
      transition: .2s;
      display:inline-flex; align-items:center;
      padding: 2px;
    }
    [data-theme="dark"] .toggle{
      background: rgba(2,6,23,.45);
      border-color: rgba(148,163,184,.20);
    }
    .toggle .knob{
      width: 26px; height: 26px;
      border-radius: 999px;
      background: linear-gradient(135deg, var(--primary), var(--accent));
      box-shadow: var(--shadow-sm);
      transition: .2s;
      transform: translateX(0);
    }
    .toggle.on .knob{ transform: translateX(22px); }
    .toggle:focus-visible{outline:none; box-shadow:0 0 0 4px var(--ring)}

    /* Responsive */
    @media (max-width: 900px){
      .tabsbar{flex-direction:column; align-items:flex-start}
      .page-header h2{font-size:28px}
      .logo{min-width:auto}
      .hint{text-align:left}
    }
  </style>
</head>

<body>
  <!-- HEADER -->
  <header class="header">
    <div class="header-content">
      <div class="logo">
        <div class="logo-icon"><i class="fas fa-heartbeat"></i></div>
        <div class="logo-text">
          <h1>Sant√©+</h1>
          <p>Plateforme de sant√© professionnelle</p>
        </div>
      </div>

      <div class="header-actions">
        <button class="icon-btn" aria-label="Notifications"><i class="fas fa-bell"></i></button>
        <button class="icon-btn" aria-label="Param√®tres"><i class="fas fa-cog"></i></button>
        <button class="icon-btn" aria-label="Profil"><i class="fas fa-user"></i></button>
      </div>
    </div>
  </header>

  <main class="container">
    <div class="page-header">
      <h2 id="helloTitle">Bonjour, Dr. Victor Mohammad üëã</h2>
      <p id="helloSubtitle">Dossier m√©dical complet - ‚Ä¶</p>
    </div>

    <!-- NAV -->
    <div class="tabsbar">
      <div class="tabs" role="tablist" aria-label="Navigation">
        <button class="tab" role="tab" data-page="dashboard" aria-selected="true">
          <i class="fas fa-chart-pie"></i> Dashboard
        </button>
        <button class="tab" role="tab" data-page="capteurs" aria-selected="false">
          <i class="fas fa-wave-square"></i> Capteurs
        </button>
        <button class="tab" role="tab" data-page="rapports" aria-selected="false">
          <i class="fas fa-file-medical"></i> Rapports
        </button>
        <button class="tab" role="tab" data-page="settings" aria-selected="false">
          <i class="fas fa-sliders"></i> Param√®tres
        </button>
      </div>
      <div class="hint" id="hint">Astuce : touches ‚Üê ‚Üí + Enter/Espace + URL #page</div>
    </div>

    <!-- DASHBOARD -->
    <section id="page-dashboard" class="page active" role="tabpanel" aria-label="Dashboard">
      <div class="section-head" style="margin-bottom:12px;">
        <div>
          <div style="font-weight:950;font-size:18px;">Aper√ßu & Activit√©</div>
          <div style="color:var(--muted2);font-weight:700;font-size:12px;margin-top:4px;">
            Indicateurs globaux (exemples UI).
          </div>
        </div>
        <div class="row">
          <span class="badge b-ok"><i class="fas fa-check"></i> Service op√©rationnel</span>
          <span class="badge b-watch" id="pirStatus"><i class="fas fa-person-circle-check"></i> Pr√©sence : ‚Äî</span>
        </div>
      </div>

      <div class="grid-3" style="margin-bottom:14px;">
        <div class="mini-card">
          <div class="mini-title">Fr√©quence cardiaque</div>
          <div class="mini-value">72</div>
          <div class="mini-sub">bpm (au repos)</div>
        </div>
        <div class="mini-card">
          <div class="mini-title">Hydratation</div>
          <div class="mini-value">1.8 L</div>
          <div class="mini-sub">Objectif 2.5 L</div>
        </div>
        <div class="mini-card">
          <div class="mini-title">Variabilit√© cardiaque</div>
          <div class="mini-value">58 ms</div>
          <div class="mini-sub">HRV moyen</div>
        </div>
      </div>

      <div class="grid-2">
        <div class="card">
          <div class="card-title"><i class="fas fa-heart-pulse"></i> Activit√© (BPM ‚Äì 7 jours)</div>
          <div class="chart">
            <canvas id="chartActivity"></canvas>
          </div>
          <div class="sub">Tendance hebdomadaire (exemple).</div>
        </div>

        <div class="card">
          <div class="card-title"><i class="fas fa-chart-line"></i> Fr√©quence & tendance</div>
          <div class="chart">
            <canvas id="chartBpWeek"></canvas>
          </div>
          <div class="sub">Lecture tensionnelle (exemple).</div>
        </div>
      </div>
    </section>

    <!-- CAPTEURS -->
    <section id="page-capteurs" class="page" role="tabpanel" aria-label="Capteurs">
      <div class="section-head" style="margin-bottom:12px;">
        <div>
          <div style="font-weight:950;font-size:18px;">Capteurs & Mesures</div>
          <div style="color:var(--muted2);font-weight:700;font-size:12px;margin-top:4px;">
            MAX30102 + PIR (Bosch IR / pr√©sence) ‚Äî affichage UI.
          </div>
        </div>
        <div class="row">
          <button class="btn" type="button" id="btnSimulate"><i class="fas fa-bolt"></i> Simuler mise √† jour</button>
        </div>
      </div>

      <div class="grid-auto" style="margin-bottom:14px;">
        <div class="mini-card">
          <div class="mini-title">MAX30102</div>
          <div class="mini-value" id="liveHr">‚Äî</div>
          <div class="mini-sub">BPM (temps r√©el)</div>
        </div>
        <div class="mini-card">
          <div class="mini-title">SpO‚ÇÇ</div>
          <div class="mini-value" id="liveSpo2">‚Äî</div>
          <div class="mini-sub">Saturation (%)</div>
        </div>
        <div class="mini-card">
          <div class="mini-title">PIR (pr√©sence)</div>
          <div class="mini-value" id="livePir">‚Äî</div>
          <div class="mini-sub">D√©tection</div>
        </div>
        <div class="mini-card">
          <div class="mini-title">√âchantillonnage</div>
          <div class="mini-value">400 Hz</div>
          <div class="mini-sub">Plage annonc√©e 100‚Äì400 Hz</div>
        </div>
      </div>

      <div class="card">
        <div class="card-title"><i class="fas fa-droplet"></i> √âvolution de la pression art√©rielle</div>
        <div class="chart">
          <canvas id="chartCapteursBp"></canvas>
        </div>
        <div class="sub">Courbe indicative (exemple UI). Tu pourras remplacer par tes vraies donn√©es capteurs.</div>
      </div>
    </section>

    <!-- RAPPORTS -->
    <section id="page-rapports" class="page" role="tabpanel" aria-label="Rapports">
      <div class="section-head" style="margin-bottom:12px;">
        <div>
          <div style="font-weight:950;font-size:18px;">Historique des patients</div>
          <div style="color:var(--muted2);font-weight:700;font-size:12px;margin-top:4px;">
            Clique sur un patient (ou ‚ÄúVoir dossier‚Äù) pour ouvrir son dossier.
          </div>
        </div>
        <div class="row">
          <span class="badge b-ok"><i class="fas fa-shield-heart"></i> Donn√©es UI</span>
        </div>
      </div>

      <div style="overflow:auto;">
        <table>
          <thead>
            <tr>
              <th>Patient</th>
              <th>Date</th>
              <th>BPM</th>
              <th>Pression</th>
              <th>SpO‚ÇÇ</th>
              <th>Statut</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody id="reportsTbody"></tbody>
        </table>
      </div>

      <div style="margin-top:12px; color:var(--muted2); font-size:12px; font-weight:700;">
        Astuce : tu peux aussi aller directement sur <code>#dossier</code> apr√®s avoir ouvert un patient.
      </div>
    </section>

    <!-- DOSSIER PATIENT -->
    <section id="page-dossier" class="page" role="tabpanel" aria-label="Dossier patient">
      <div class="section-head" style="margin-bottom:12px;">
        <div>
          <div style="font-weight:950;font-size:18px;">Dossier patient ‚Äî <span id="dossierName">‚Äî</span></div>
          <div style="color:var(--muted2);font-weight:700;font-size:12px;margin-top:4px;">
            Derni√®re mesure : <span id="dossierLast">‚Äî</span>
          </div>
        </div>
        <div class="row">
          <button class="btn ghost" type="button" id="btnBackReports"><i class="fas fa-arrow-left"></i> Retour rapports</button>
        </div>
      </div>

      <div class="grid-auto" style="margin-bottom:14px;">
        <div class="mini-card">
          <div class="mini-title">Identit√©</div>
          <div class="mini-value" style="font-size:20px;" id="dossierFullName">‚Äî</div>
          <div class="mini-sub">ID: <span id="dossierId">‚Äî</span> ‚Ä¢ <span id="dossierSex">‚Äî</span> ‚Ä¢ <span id="dossierAge">‚Äî</span></div>
        </div>
        <div class="mini-card">
          <div class="mini-title">Groupe sanguin</div>
          <div class="mini-value" id="dossierBlood">‚Äî</div>
          <div class="mini-sub">Allergies : <span id="dossierAllergies">‚Äî</span></div>
        </div>
        <div class="mini-card">
          <div class="mini-title">Contact</div>
          <div class="mini-value" style="font-size:18px;" id="dossierPhone">‚Äî</div>
          <div class="mini-sub">T√©l√©phone</div>
        </div>
        <div class="mini-card">
          <div class="mini-title">R√©sum√©</div>
          <div class="mini-value" style="font-size:18px;">Suivi</div>
          <div class="mini-sub">Mesures & alertes patient</div>
        </div>
      </div>

      <div class="grid-3" style="margin-bottom:14px;">
        <div class="mini-card">
          <div class="mini-title">Fr√©quence cardiaque</div>
          <div class="mini-value"><span id="dossierHr">‚Äî</span></div>
          <div class="mini-sub">BPM</div>
        </div>
        <div class="mini-card">
          <div class="mini-title">Pression</div>
          <div class="mini-value"><span id="dossierBp">‚Äî</span></div>
          <div class="mini-sub">mmHg (sys/dia)</div>
        </div>
        <div class="mini-card">
          <div class="mini-title">SpO‚ÇÇ</div>
          <div class="mini-value"><span id="dossierSpo2">‚Äî</span></div>
          <div class="mini-sub">Saturation</div>
        </div>
      </div>

      <div class="grid-2" style="margin-bottom:14px;">
        <div class="card">
          <div class="card-title"><i class="fas fa-heart"></i> BPM ‚Äî 7 jours</div>
          <div class="chart"><canvas id="chartDossierHeart"></canvas></div>
        </div>
        <div class="card">
          <div class="card-title"><i class="fas fa-droplet"></i> Pression ‚Äî 7 jours</div>
          <div class="chart"><canvas id="chartDossierBp"></canvas></div>
        </div>
      </div>

      <div class="grid-3">
        <div class="card">
          <div class="card-title"><i class="fas fa-notes-medical"></i> Historique</div>
          <div style="font-weight:800;color:var(--text);line-height:1.5;" id="dossierHistory">‚Äî</div>
        </div>
        <div class="card">
          <div class="card-title"><i class="fas fa-pills"></i> Traitements</div>
          <div style="font-weight:800;color:var(--text);line-height:1.5;" id="dossierMeds">‚Äî</div>
        </div>
        <div class="card">
          <div class="card-title"><i class="fas fa-triangle-exclamation"></i> Notes & alertes</div>
          <div style="font-weight:800;color:var(--text);line-height:1.5;" id="dossierAlerts">‚Äî</div>
        </div>
      </div>
    </section>

    <!-- SETTINGS -->
    <section id="page-settings" class="page" role="tabpanel" aria-label="Param√®tres">
      <div class="section-head" style="margin-bottom:12px;">
        <div>
          <div style="font-weight:950;font-size:18px;">Param√®tres</div>
          <div style="color:var(--muted2);font-weight:700;font-size:12px;margin-top:4px;">
            Th√®me, langue et messages patient (exemple UI).
          </div>
        </div>
      </div>

      <div class="grid-2" style="margin-bottom:14px;">
        <div class="card">
          <div class="card-title"><i class="fas fa-palette"></i> Apparence</div>
          <div class="row" style="justify-content:space-between; margin-top:8px;">
            <div>
              <div style="font-weight:950;">Th√®me</div>
              <div class="sub">Basculer clair / sombre</div>
            </div>
            <div class="row">
              <div id="themeLabel" class="sub" style="font-weight:950;">Clair</div>
              <div class="toggle" id="themeToggle" tabindex="0" role="switch" aria-checked="false" aria-label="Basculer le th√®me">
                <div class="knob"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-title"><i class="fas fa-language"></i> Langue</div>
          <div class="field" style="margin-top:10px;">
            <div class="label">Choisir</div>
            <select id="langSelect">
              <option value="fr">Fran√ßais</option>
              <option value="en">English</option>
            </select>
            <div class="sub">La date/heure du header suit la langue s√©lectionn√©e.</div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-title"><i class="fas fa-message"></i> Messages possibles au patient</div>
        <div class="grid-auto" style="margin-top:10px;">
          <div class="mini-card">
            <div class="mini-title">Normal</div>
            <div style="font-weight:850;line-height:1.5;margin-top:8px;">
              Vos param√®tres sont dans la norme. Continuez votre suivi r√©gulier.
            </div>
          </div>
          <div class="mini-card">
            <div class="mini-title">√Ä surveiller</div>
            <div style="font-weight:850;line-height:1.5;margin-top:8px;">
              Une valeur est l√©g√®rement √©lev√©e. Refaire la mesure au repos et v√©rifier l‚Äôhydratation.
            </div>
          </div>
          <div class="mini-card">
            <div class="mini-title">Alerte</div>
            <div style="font-weight:850;line-height:1.5;margin-top:8px;">
              Valeur hors seuil. Si sympt√¥mes, contacter un professionnel de sant√©.
            </div>
          </div>
          <div class="mini-card">
            <div class="mini-title">Rappel</div>
            <div style="font-weight:850;line-height:1.5;margin-top:8px;">
              Pensez √† r√©aliser votre mesure quotidienne et √† compl√©ter votre historique.
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script>
    // -----------------------------
    // Data (UI examples)
    // -----------------------------
    const patients = [
      {
        id: "WALY-001",
        name: "Waly",
        age: 35,
        sex: "Masculin",
        phone: "+33 6 12 34 56 78",
        blood: "O+",
        allergies: "Aucune connue",
        last: "14/01/2026 ‚Ä¢ 08:30",
        status: "normal",
        hr: 74,
        spo2: 98,
        hrv: 55,
        bp: { sys: 121, dia: 79 },
        bpm7: [70,72,71,73,74,75,74],
        bp7: {
          labels: ["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"],
          sys: [118,120,119,121,122,121,121],
          dia: [77,78,78,79,80,79,79]
        },
        medical: {
          history: "HTA familiale l√©g√®re. Aucun ant√©c√©dent chirurgical majeur.",
          meds: "Aucun traitement chronique.",
          alerts: "Rappel : hydratation + mesure au repos si sympt√¥mes."
        }
      },
      {
        id: "BINAJ-002",
        name: "Binaj",
        age: 48,
        sex: "Masculin",
        phone: "+33 6 98 76 54 32",
        blood: "A+",
        allergies: "P√©nicilline (suspect√©e)",
        last: "13/01/2026 ‚Ä¢ 17:10",
        status: "watch",
        hr: 88,
        spo2: 96,
        hrv: 42,
        bp: { sys: 135, dia: 86 },
        bpm7: [82,84,86,88,87,89,88],
        bp7: {
          labels: ["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"],
          sys: [128,132,134,135,136,135,135],
          dia: [82,84,85,86,86,87,86]
        },
        medical: {
          history: "Surveillance tensionnelle. Fatigue r√©cente.",
          meds: "Compl√©ment magn√©sium (occasionnel).",
          alerts: "Conseil : refaire mesure au repos. Si > 140/90 persistant, avis m√©dical."
        }
      },
      {
        id: "MESSAOUD-003",
        name: "Messaoud",
        age: 61,
        sex: "Masculin",
        phone: "+33 7 11 22 33 44",
        blood: "B+",
        allergies: "Aucune connue",
        last: "12/01/2026 ‚Ä¢ 09:05",
        status: "normal",
        hr: 69,
        spo2: 99,
        hrv: 62,
        bp: { sys: 118, dia: 76 },
        bpm7: [66,67,68,69,70,69,69],
        bp7: {
          labels: ["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"],
          sys: [116,117,118,118,119,118,118],
          dia: [74,75,76,76,77,76,76]
        },
        medical: {
          history: "Ancien fumeur (arr√™t). Activit√© physique r√©guli√®re.",
          meds: "Vitamine D (quotidien).",
          alerts: "RAS."
        }
      }
    ];

    const reportRows = [
      { patient: "Waly",     date: "14/01/2026 ‚Ä¢ 08:30", bpm: 74, bp: "121/79", spo2: "98%", status: "normal" },
      { patient: "Binaj",    date: "13/01/2026 ‚Ä¢ 17:10", bpm: 88, bp: "135/86", spo2: "96%", status: "watch"  },
      { patient: "Messaoud", date: "12/01/2026 ‚Ä¢ 09:05", bpm: 69, bp: "118/76", spo2: "99%", status: "normal" },
      { patient: "Waly",     date: "11/01/2026 ‚Ä¢ 15:20", bpm: 92, bp: "142/90", spo2: "95%", status: "alert"  }
    ];

    // -----------------------------
    // Navigation / Pages
    // -----------------------------
    const tabs = Array.from(document.querySelectorAll('.tab'));
    const pages = Array.from(document.querySelectorAll('.page'));

    function setActivePage(pageName, pushHash = true){
      pages.forEach(p => p.classList.toggle('active', p.id === 'page-' + pageName));
      tabs.forEach(t => {
        const isActive = t.dataset.page === pageName;
        t.setAttribute('aria-selected', isActive ? 'true' : 'false');
      });
      if (pushHash) history.replaceState(null, '', '#' + pageName);
    }

    tabs.forEach(t => {
      t.addEventListener('click', () => setActivePage(t.dataset.page));
      t.addEventListener('keydown', (e) => {
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          setActivePage(t.dataset.page);
        }
      });
    });

    document.addEventListener('keydown', (e) => {
      if (e.key !== 'ArrowLeft' && e.key !== 'ArrowRight') return;
      const current = tabs.findIndex(t => t.getAttribute('aria-selected') === 'true');
      if (current < 0) return;
      const next = (e.key === 'ArrowRight')
        ? (current + 1) % tabs.length
        : (current - 1 + tabs.length) % tabs.length;

      tabs[next].focus();
      setActivePage(tabs[next].dataset.page);
    });

    function initFromHash(){
      const initial = (location.hash || '#dashboard').replace('#','');
      const exists = pages.some(p => p.id === 'page-' + initial);
      setActivePage(exists ? initial : 'dashboard', false);
    }

    // -----------------------------
    // Reports table rendering
    // -----------------------------
    function statusBadge(status){
      if (status === "normal") return `<span class="badge b-ok"><i class="fas fa-check"></i> Normal</span>`;
      if (status === "watch")  return `<span class="badge b-watch"><i class="fas fa-triangle-exclamation"></i> √Ä surveiller</span>`;
      return `<span class="badge b-alert"><i class="fas fa-bell"></i> Alerte</span>`;
    }

    function renderReports(){
      const tbody = document.getElementById("reportsTbody");
      if (!tbody) return;

      tbody.innerHTML = reportRows.map(r => `
        <tr>
          <td>
            <span class="linklike" data-open-dossier="${r.patient}">
              <i class="fas fa-folder-open"></i> ${r.patient}
            </span>
          </td>
          <td>${r.date}</td>
          <td>${r.bpm}</td>
          <td>${r.bp}</td>
          <td>${r.spo2}</td>
          <td>${statusBadge(r.status)}</td>
          <td>
            <button class="btn primary" type="button" data-open-dossier="${r.patient}">
              <i class="fas fa-user-doctor"></i> Voir dossier
            </button>
          </td>
        </tr>
      `).join("");
    }

    // -----------------------------
    // Dossier patient
    // -----------------------------
    let chartDossierHeart = null;
    let chartDossierBp = null;

    function findPatientByName(name){
      return patients.find(p => p.name.toLowerCase() === String(name).toLowerCase());
    }

    function openPatientDossierByName(name){
      const p = findPatientByName(name);
      if (!p) return;

      const set = (id, val) => { const el = document.getElementById(id); if (el) el.textContent = val; };

      set("dossierName", p.name);
      set("dossierFullName", p.name);
      set("dossierLast", p.last);
      set("dossierBlood", p.blood || "‚Äî");
      set("dossierAllergies", p.allergies || "‚Äî");
      set("dossierAge", (p.age != null) ? (p.age + " ans") : "‚Äî");
      set("dossierSex", p.sex || "‚Äî");
      set("dossierPhone", p.phone || "‚Äî");
      set("dossierId", p.id || "‚Äî");

      set("dossierHr", (p.hr ?? "‚Äî"));
      set("dossierBp", p.bp ? `${p.bp.sys}/${p.bp.dia}` : "‚Äî");
      set("dossierSpo2", (p.spo2 != null) ? `${p.spo2}%` : "‚Äî");
      // hrv (optionnel dans UI)
      // set("dossierHrv", (p.hrv ?? "‚Äî"));

      set("dossierHistory", (p.medical && p.medical.history) ? p.medical.history : "‚Äî");
      set("dossierMeds", (p.medical && p.medical.meds) ? p.medical.meds : "‚Äî");
      set("dossierAlerts", (p.medical && p.medical.alerts) ? p.medical.alerts : "‚Äî");

      rebuildDossierCharts(p);
      setActivePage("dossier");
    }

    function rebuildDossierCharts(p){
      if (chartDossierHeart) chartDossierHeart.destroy();
      if (chartDossierBp) chartDossierBp.destroy();

      const heartCanvas = document.getElementById("chartDossierHeart");
      const bpCanvas = document.getElementById("chartDossierBp");
      if (!heartCanvas || !bpCanvas) return;

      const ctxH = heartCanvas.getContext("2d");
      chartDossierHeart = new Chart(ctxH, {
        type: "line",
        data: {
          labels: p.bp7.labels,
          datasets: [{
            label: "BPM",
            data: p.bpm7,
            borderColor: "#dc2626",
            backgroundColor: "rgba(220,38,38,.08)",
            fill: true,
            tension: .35,
            borderWidth: 2,
            pointRadius: 3
          }]
        },
        options: {
          responsive:true,
          maintainAspectRatio:false,
          plugins:{ legend:{ display:false } }
        }
      });

      const ctxB = bpCanvas.getContext("2d");
      chartDossierBp = new Chart(ctxB, {
        type: "line",
        data: {
          labels: p.bp7.labels,
          datasets: [
            {
              label: "Systolique",
              data: p.bp7.sys,
              borderColor:"#dc2626",
              backgroundColor:"rgba(220,38,38,.06)",
              fill:true,
              tension:.35,
              borderWidth:2,
              pointRadius:3
            },
            {
              label: "Diastolique",
              data: p.bp7.dia,
              borderColor:"#2563eb",
              backgroundColor:"rgba(37,99,235,.06)",
              fill:true,
              tension:.35,
              borderWidth:2,
              pointRadius:3
            }
          ]
        },
        options:{
          responsive:true,
          maintainAspectRatio:false,
          plugins:{ legend:{ display:true, position:"bottom" } }
        }
      });
    }

    document.addEventListener("click", (e) => {
      const el = e.target.closest("[data-open-dossier]");
      if (!el) return;
      openPatientDossierByName(el.getAttribute("data-open-dossier"));
    });

    const backBtn = document.getElementById("btnBackReports");
    if (backBtn) backBtn.addEventListener("click", ()=> setActivePage("rapports"));

    // -----------------------------
    // Charts: Dashboard + Capteurs
    // -----------------------------
    let chartActivity = null;
    let chartBpWeek = null;
    let chartCapteursBp = null;

    function buildCharts(){
      const actCanvas = document.getElementById("chartActivity");
      const bpWeekCanvas = document.getElementById("chartBpWeek");
      const capBpCanvas = document.getElementById("chartCapteursBp");

      if (actCanvas){
        const actCtx = actCanvas.getContext("2d");
        chartActivity = new Chart(actCtx, {
          type: "line",
          data: {
            labels: ["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"],
            datasets: [{
              label: "BPM",
              data: [68, 72, 70, 75, 71, 73, 72],
              borderColor: "#dc2626",
              backgroundColor: "rgba(220,38,38,.08)",
              fill: true,
              tension: .35,
              borderWidth: 2,
              pointRadius: 3
            }]
          },
          options: { responsive:true, maintainAspectRatio:false, plugins:{ legend:{ display:false } } }
        });
      }

      if (bpWeekCanvas){
        const bpCtx = bpWeekCanvas.getContext("2d");
        chartBpWeek = new Chart(bpCtx, {
          type: "line",
          data: {
            labels: ["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"],
            datasets: [
              { label:"Systolique", data:[118,122,120,121,120,119,120], borderColor:"#dc2626", backgroundColor:"rgba(220,38,38,.05)", fill:true, tension:.35, borderWidth:2, pointRadius:3 },
              { label:"Diastolique", data:[78,82,80,79,80,79,80], borderColor:"#2563eb", backgroundColor:"rgba(37,99,235,.05)", fill:true, tension:.35, borderWidth:2, pointRadius:3 }
            ]
          },
          options: { responsive:true, maintainAspectRatio:false, plugins:{ legend:{ display:true, position:"bottom" } } }
        });
      }

      if (capBpCanvas){
        const capCtx = capBpCanvas.getContext("2d");
        chartCapteursBp = new Chart(capCtx, {
          type: "line",
          data: {
            labels: ["08:00","08:10","08:20","08:30","08:40","08:50","09:00"],
            datasets: [
              { label:"Systolique", data:[120,121,123,122,121,120,121], borderColor:"#dc2626", backgroundColor:"rgba(220,38,38,.05)", fill:true, tension:.35, borderWidth:2, pointRadius:3 },
              { label:"Diastolique", data:[80,79,80,80,79,78,79], borderColor:"#2563eb", backgroundColor:"rgba(37,99,235,.05)", fill:true, tension:.35, borderWidth:2, pointRadius:3 }
            ]
          },
          options: { responsive:true, maintainAspectRatio:false, plugins:{ legend:{ display:true, position:"bottom" } } }
        });
      }
    }

    // -----------------------------
    // Settings: Theme + Language + Date/Time i18n
    // -----------------------------
    const themeToggle = document.getElementById("themeToggle");
    const themeLabel = document.getElementById("themeLabel");
    const langSelect = document.getElementById("langSelect");

    let currentLang = "fr";
    let dateTimer = null;

    const i18n = {
      fr: { helloPrefix: "Dossier m√©dical complet" },
      en: { helloPrefix: "Full medical record" }
    };

    function localeFromLang(lang){
      if (lang === "en") return "en-GB";
      return "fr-FR";
    }

    function updateDateTime(){
      const subtitle = document.getElementById("helloSubtitle");
      if (!subtitle) return;

      const now = new Date();
      const locale = localeFromLang(currentLang);

      const optionsDate = { weekday:"long", day:"2-digit", month:"long", year:"numeric" };
      const optionsTime = { hour:"2-digit", minute:"2-digit", second:"2-digit" };

      const dateStr = now.toLocaleDateString(locale, optionsDate);
      const timeStr = now.toLocaleTimeString(locale, optionsTime);

      const prefix = (i18n[currentLang] && i18n[currentLang].helloPrefix)
        ? i18n[currentLang].helloPrefix
        : "Dossier m√©dical complet";

      subtitle.textContent = `${prefix} - ${dateStr} ‚Ä¢ ${timeStr}`;
    }

    function startDateClock(){
      if (dateTimer) clearInterval(dateTimer);
      updateDateTime();
      dateTimer = setInterval(updateDateTime, 1000);
    }

    function applyTheme(theme){
      document.body.setAttribute("data-theme", theme);
      const isDark = theme === "dark";

      if (themeToggle){
        themeToggle.classList.toggle("on", isDark);
        themeToggle.setAttribute("aria-checked", isDark ? "true" : "false");
      }
      if (themeLabel) themeLabel.textContent = isDark ? "Sombre" : "Clair";

      localStorage.setItem("theme", theme);
    }

    function toggleTheme(){
      const current = localStorage.getItem("theme") || "light";
      applyTheme(current === "dark" ? "light" : "dark");
    }

    if (themeToggle){
      themeToggle.addEventListener("click", toggleTheme);
      themeToggle.addEventListener("keydown", (e) => {
        if (e.key === "Enter" || e.key === " ") { e.preventDefault(); toggleTheme(); }
      });
    }

    function applyLanguage(lang){
      currentLang = lang;
      localStorage.setItem("lang", lang);
      if (langSelect) langSelect.value = lang;
      startDateClock();
    }

    if (langSelect){
      langSelect.addEventListener("change", () => applyLanguage(langSelect.value));
    }

    // -----------------------------
    // Simple "simulation" UI (Capteurs)
    // -----------------------------
    function randInt(min, max){
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function simulateSensors(){
      const hr = randInt(65, 95);
      const spo2 = randInt(94, 100);
      const pir = (Math.random() > 0.35) ? "D√©tect√©e" : "Non d√©tect√©e";

      const liveHr = document.getElementById("liveHr");
      const liveSpo2 = document.getElementById("liveSpo2");
      const livePir = document.getElementById("livePir");
      const pirStatus = document.getElementById("pirStatus");

      if (liveHr) liveHr.textContent = String(hr);
      if (liveSpo2) liveSpo2.textContent = String(spo2) + "%";
      if (livePir) livePir.textContent = pir;
      if (pirStatus) pirStatus.innerHTML = `<i class="fas fa-person-circle-check"></i> Pr√©sence : ${pir}`;

      // Update capteurs BP chart slightly (UI only)
      if (chartCapteursBp){
        const sys = 118 + randInt(0, 8);
        const dia = 76 + randInt(0, 6);

        const ds0 = chartCapteursBp.data.datasets[0].data;
        const ds1 = chartCapteursBp.data.datasets[1].data;
        ds0.push(sys); ds0.shift();
        ds1.push(dia); ds1.shift();
        chartCapteursBp.update();
      }
    }

    const btnSim = document.getElementById("btnSimulate");
    if (btnSim) btnSim.addEventListener("click", simulateSensors);

    // -----------------------------
    // Boot
    // -----------------------------
    function boot(){
      const savedTheme = localStorage.getItem("theme") || "light";
      applyTheme(savedTheme);

      const savedLang = localStorage.getItem("lang") || "fr";
      applyLanguage(savedLang);

      renderReports();
      buildCharts();
      initFromHash();

      // First UI init for sensors
      simulateSensors();
    }

    boot();
  </script>
</body>
</html>
